<html>
<!DOCTYPE html>

<html lang="en">



<style>

.header{grid-area: header;}
.timer {grid-area: timer; text-align: center; font-size: 4vw; padding: 10vh;}
.wallet {grid-area: wallet; }
.spendmoney {grid-area: spendmoney;}
.footer{grid-area: footer;}
.hour{grid-area: hour;}
#header{text-align: center; font-size: 2vw; padding: 3vh; background:orange;}
#addwallet {text-align: center;}
#walletgrid {height: 100%;display: grid; grid-template-columns: 10% 10% 10% 10% 10% 10% 10% 10% 10% 10%;grid-template-rows: 10% 10% 10% 10% 10% 10% 10% 10% 10% 10%; }
#addwallet{grid-column-start: 5; grid-column-end:6; grid-row-start: 1; grid-row-end: 2;}
.tomatoes{display: flex; grid-row-start:2; grid-row-end: 11; grid-column-start:1;grid-column-end:11; font-size: 3vw;}
.wrapper{
  height: 100vh;
  display: grid;
  grid-gap: 10px;
  grid-template-columns: 10% 40% 40% 10%;
  grid-template-rows: 10% 35% 30% 15% 10%;

  grid-template-areas:
  "header header header header"
  "timer timer timer  timer"
  "wallet wallet hour  hour"
  "spendmoney spendmoney hour hour"
  "footer footer footer footer";

}

.box{border: 1px solid black;}

.wallet {background-color: brown;}
#timer {display: grid; grid-template-rows: 60% 30%; grid-template-columns: 33% 33% 33%;}
.timerbuttons{ display: grid;grid-row-start: 2; grid-row-end: 3;}
#timercountdown {grid-column-start: 2;grid-column-end: 3;}
#clicktoadd{text-align:center;font-size: 3vw; border: 1px dotted pink; width: 100%}
#uno{height: 7vh; font-size: 2vw; }
#spendmoney{font-size: 2.5vw;}
#desc { grid-row-start: 10; grid-row-end: 11; grid-column-start: 1; grid-column-end: 11; color: white; font-size: 2vw;}
</style>

<head>
	<meta charset="utf-8">
	<title>Tomato Wallet</title>
	<!-- <link rel="stylesheet" href="css/style.css"> -->

</head>
<body>

  <div class='wrapper'>
    <header class='box header' id='header'> Your Tomato Wallet</header>
    <div class='box timer'id='timer' >
      <button class='timerbuttons' id='start' onclick='timer(25)'> Start</button>
      <button class='timerbuttons' onclick='stoptimer()'> Reset </button>
      <button class='timerbuttons'onclick='openprompt()'> New Countdown </button>
       <div id='timercountdown'> 25:00 Timer</div>
     </div>

    <div class='box wallet'> <div id='walletgrid'> <div class='tomatoes' id='tomatoes'> </div> <button id='addwallet' onclick='addtomato()'> Add $ </button> <div id='desc'> All $ earned today shown here</div> </div> </div>
    <div class='box spendmoney' id='spendmoney' onclick='howMuch()'> Click here to take a break. Each $ spent is a 5 minute break</div>
    <div class='box footer'> ngjason93@gmail.com </div>
    <div class='box hour'>
      <div id='hourslist'>
          <button id='clicktoadd' onclick='whatDo()'> Click to add what you did :)</button>
          <div id='uno'> </div>

      </div>

     </div>
<audio id='timerup'>
  <source src='https://onlineclock.net/audio/options/bird-song.mp3' type='audio/ogg'>
    Your browser does not support the audio element.

  </div>



</body>

<script>
var today = new Date();

var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
var time = today.getHours() + ":" + today.getMinutes();
let datetime = time+', ' +date
console.log(datetime)
var didlist = []


  function howMuch(){
    var spend = prompt('How many tomatoes do you want to spend?', 'Each $ is 5 minutes')
    console.log('spent ' + spend + ' Now function to remove little dollars from wallet')
    console.log(tomatocount)
    console.log(spend)
    timer(spend*5)

    tomatocount -= Number(spend);
    console.log(tomatocount)
    document.getElementById('spendmoney').innerHTML = tomatocount;
    console.log('tomatocount is' + tomatocount)

  }
  function whatDo(){
    var what = prompt('What did you do', 'This gets saved for later');
    var whatwstamp = document.getElementById('uno').innerHTML += '<br>' + what + ', Timestamp: ' +datetime;
    didlist.push(what,datetime)
    console.log(didlist);

  }


function timer(mins){
  var plus = new Date().getTime();
  plus += 60000*mins
  document.getElementById('start').style.display = 'none'

  x = setInterval(function() {

    // Get today's date and time
    var now = new Date().getTime();

    // Find the distance between now and the count down date
    var distance = plus - now;

    // Time calculations for days, hours, minutes and seconds
    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Output the result in an element with id="demo"
    document.getElementById("timercountdown").innerHTML =
    + minutes + "m " + seconds + "s ";


    // If the count down is over, write some text
    if (distance < 0) {
      clearInterval(x);
      document.getElementById("timercountdown").innerHTML = "EXPIRED";
      // document.getElementById("demo").addEventListener("click", timer)
      document.getElementById('start').style.display = 'grid'
      document.getElementById('timerup').play()

    }
  }, 1000);
}
function stoptimer(){
  try{clearInterval(x)}
  catch(err){
  document.getElementById('start').style.display = 'grid';
  document.getElementById("timercountdown").innerHTML = "EXPIRED";}
  document.getElementById('start').style.display = 'grid';
  document.getElementById("timercountdown").innerHTML = "EXPIRED";
}
function openprompt(){
  var insertMin = prompt('How many minutes?','numbers only')
  stoptimer();
  timer(insertMin)
}

tomatocount =0
function addtomato(){
  tomatocount +=1;
  console.log(tomatocount);
  if (tomatocount % 12 ==0){
    document.getElementById('tomatoes').innerHTML += ' 12 ';
  } else{
    document.getElementById('tomatoes').innerHTML += ' $ '
    document.getElementById('spendmoney').innerHTML =   'Saved Tomatos:' + tomatocount

  }}

</script>
</html>
